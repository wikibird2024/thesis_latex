%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                        LANGUAGE & ENCODING
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% UTF-8 for special characters
\usepackage[utf8]{inputenc}
% T5 encoding for Vietnamese
\usepackage[T5]{fontenc}
% Vietnamese language support
\usepackage[vietnamese]{babel}
% Times font for Vietnamese compatibility
\usepackage{newtxtext,newtxmath}

% Thesis name macros
\newcommand{\TENLUANVAN}{Hệ thống phát hiện và cảnh báo té ngã thời gian thực tích hợp cảm biến, xử lý ảnh và định vị}
\newcommand{\THESISNAME}{Real-time fall detection and alert system integrating sensors, image processing, and positioning}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                        PAGE & LAYOUT SETTINGS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Page margins
\usepackage{geometry}
\geometry{
    top=2.5cm,
    bottom=2.5cm,
    left=2.5cm,
    right=2.5cm
}

% 1.5 line spacing
\usepackage{setspace}
\onehalfspacing

% Indent first paragraph
\usepackage{indentfirst}
\setlength{\parindent}{1.2em}
\setlength{\parskip}{0pt}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                       HEADERS, FOOTERS & TITLES
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Title formatting
\usepackage{titlesec}
% Headers/footers
\usepackage{fancyhdr}
\setlength{\headheight}{18pt}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\nouppercase{\leftmark}}
\fancyfoot[C]{\thepage}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0pt}
\renewcommand{\chaptermark}[1]{\markboth{\chaptername\ \thechapter: #1}{}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                       DOCUMENT CONTENT PACKAGES
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Math support
\usepackage{amsmath,amssymb}
% Images
\usepackage{graphicx}
% Resize blocks
\usepackage{adjustbox}
% Tables
\usepackage{array,booktabs,tabularx}
% Lists, columns, figures
\usepackage{enumitem,multicol,wrapfig,float}
% Captions
\usepackage[font=small,labelfont=bf]{caption}
% Subfigures
\usepackage{subcaption}

% Code listings (important: loaded once)
\usepackage{listings}
% Colors
\usepackage[table]{xcolor}
\definecolor{darkblue}{RGB}{0,82,147}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                        CODE LISTINGS (JSON)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% JSON language definition
\lstdefinelanguage{json}{
  keywords={true,false,null},
  keywordstyle=\color{blue}\bfseries,
  string=[s]{"}{"},
  stringstyle=\color{red},
  comment=[l]{//},
  commentstyle=\color{gray},
  basicstyle=\ttfamily\footnotesize,
  showstringspaces=false,
  % Vietnamese characters should be handled by the main document setup,
  % not individually in the listings environment. Removing this makes it more robust.
}

% Listings style (example usage: \lstinputlisting[language=json]{file.json})
\lstset{
  backgroundcolor=\color{gray!10},
  frame=single,
  framesep=5pt,
  aboveskip=10pt,
  belowskip=10pt,
  captionpos=b,
  numbers=left,
  numberstyle=\tiny\color{gray},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=2,
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                    ALGORITHMS & PSEUDOCODE
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Algorithm support
\usepackage{algorithm}
\usepackage{algorithmicx}
\usepackage{algpseudocode}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                    BIBLIOGRAPHY & CITATIONS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Numeric bibliography
\usepackage[backend=biber,style=numeric]{biblatex}
\addbibresource{bibliography.bib}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%               ADVANCED PACKAGES (LOAD LAST)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% TikZ for diagrams
\usepackage{tikz}
\usetikzlibrary{shapes,arrows.meta,positioning}

% Hyperlinks (unicode for Vietnamese bookmarks)
\usepackage[unicode]{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=darkblue,
    citecolor=darkblue,
    urlcolor=darkblue
}

% Hide title page number
\usepackage{etoolbox}
\AtBeginDocument{\thispagestyle{empty}}
